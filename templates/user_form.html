
<form class="needs-validation" action="{{ form_action }}" method="POST" novalidate>
    <div class="form-group mt-2">
        <label for="inputUsername">Käyttäjätunnus:</label>
        <input type="text" class="form-control" id="inputUsername" name="inputUsername" minlength="3" maxlength="12" pattern="[\p{L}\d]*" aria-describedby="usernameHelp" required>
        <div class="invalid-feedback" id="invalidInputUsername"></div>
        <small id="usernameHelp" class="form-text text-muted">{{ username_help }}</small>
    </div>
    <div class="form-group">
        <label for="inputPassword">Salasana:</label>
        <input type="password" class="form-control" id="inputPassword" name="inputPassword" minlength="6" maxlength="20" pattern="(\p{L}|[^\p{L} ])*" aria-describedby="passwordHelp" required>
        <div class="invalid-feedback" id="invalidInputPassword"></div>
        <small id="passwordHelp" class="form-text text-muted">{{ password_help }}</small>
    </div>
    <button type="submit" class="btn btn-primary">{{ user_form_action_button }}</button>
    <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
</form>

{% if validate_form %}
<script type="text/javascript" src="/static/validation.js"></script>
<script type="text/javascript">
const username = document.getElementById("inputUsername");

username.addEventListener("input", function (event) {
    let error_message = "";

    if (username.validity.tooShort) {
        error_message += "Käyttäjänimi on liian lyhyt. ";
    }

    if (username.validity.patternMismatch) {
        error_message += "Käyttäjänimi sisältää vääriä merkkejä.";
    }

    document.getElementById("invalidInputUsername").innerHTML = error_message;
});


const password = document.getElementById("inputPassword");

password.addEventListener("input", function (event) {
    let error_message = "";

    if (password.validity.tooShort) {
        error_message += "Salasana on liian lyhyt. ";
    }

    if (password.validity.patternMismatch) {
        error_message += "Salasana sisältää vääriä merkkejä.";
    }

    document.getElementById("invalidInputPassword").innerHTML = error_message;
});
</script>
{% endif %}